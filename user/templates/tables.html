{% extends 'user_base.html' %}
{% block title %}User Create Table{% endblock %}
{% block content %}
<div class="mainContent">  
{% if tables.count > 4 %}
<div class="formHeader row">
        <h2 class="text-1 fl">You have reached your maximum free table creation per database, contact us to create more tables per database</h2>
       
        
    </div>
{% else %}
  <form  method="POST" class="form">
    {% csrf_token %}
    <div class="formHeader row">
        <h2 class="text-1 fl">Add Table</h2>
        
        <div class="fr">
            <button type="submit" class="btnSave bg-1 text-fff text-bold fr">SAVE</button>
        </div>
    </div>
    {{ form.non_field_errors }}
    {% if form.errors %}
      {% for field in form %}

           {% for error in field.errors %}
                <b style="color:red;text-align:center">{{field.label}}: {{ error|escape }}</b>
           {% endfor %}

      {% endfor %}
{% endif %}
{% if messages %}
                             <ul class="messages">
                               {% for message in messages %}
                                  <li style="color:green;font-weight:bold;text-align:center"  {% if message.tags %} class=" {{ message.tags }} " {% endif %}>{{ message }} </li>
                               {% endfor %}
                             </ul>
                        {% endif %}
    <div class="formBody row">
        <div class="column s-6">
            <label class="inputGroup">
                <span>Table Name</span>
                <span>{{ form.table_name }}</span>
            </label>
            <label class="inputGroup">
                <h5 style="color:blue">Table fields should be separated commas(,) e.g name,email,password</h5>
                <span>Table Fields</span>
                <span>{{ form.table_fields }}</span>
            </label>
           
        </div>
        <input type="hidden" name="user" value="{{request.user.id}}">
        <input type="hidden" name="Dbs" value="{{id}}">
        <!--
            <label class="inputGroup">
                <span>Image</span>
                <input type="hidden" name="img" value="src">
                <span>
                    <input type="file" name="img" onchange="getImg(this)" multiple>
                    <img src="http://bookstore.crunchpress.com/wp-content/uploads/2013/05/b2.jpg" alt="" width="50">
                </span>
                
            </label>
            -->
        </div>

    </form> 
    {% endif %}
    <style>
        #table {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#table td, #table th {
  border: 1px solid #ddd;
  padding: 8px;
}

#table tr:nth-child(even){background-color: #f2f2f2;}

#table tr:hover {background-color: #ddd;}

#table th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #4CAF50;
  color: white;
}
    </style>
    <table id="table" >  
    <thead class="thead-dark">  
    <tr>  
        <th>S/N</th>  
        <th>Table Name</th>
        <th>Date created</th>  
        <th>Table Fields</th> 
        <th>Actions</th>  
    </tr>  
    </thead>  
    <tbody>  
{% for t in tables %}  
    <tr>  
        <td>{{forloop.counter}}</td>  
        <td>{{ t.table_name }}</td>  
        <td>{{ t.date_created }}</td>  
        <td>{{ t.table_fields }}</td>  
        <td> 
        <div class="cell cell-100 text-center">
                    <a href="/home/add-data/{{ t.id }}/{{id}}" class="btnEdit fa fa-plus bg-1 text-fff">Add Data</a><a href="/home/delete-table/{{ t.id }}/{{id}}" class="btnRemove fa fa-remove bg-1 text-fff" onclick='return confirm("Do you really want to remove it ?")'></a>
                </div>
             
        </td>  
    </tr>  
{% endfor %}  
    </tbody>  
</table>  
</div>

{% endblock %}
