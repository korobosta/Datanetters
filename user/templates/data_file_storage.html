{% extends 'user_base.html' %}
{% block title %}User Data File Storage{% endblock %}
{% block content %}
<div class="mainContent"> 
{% if files.count > 4 %}
<div class="formHeader row">
        <h2 class="text-1 fl">You have reached your maximum free upload allocation, contact us to get more space</h2>
       
        
    </div>
{% else %}

  <form  method="POST" class="form" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="formHeader row">
        <h2 class="text-1 fl">Upload your file to store</h2>
        {{ form.non_field_errors }}
        <div class="fr">
            <button type="submit" class="btnSave bg-1 text-fff text-bold fr">UPLOAD</button>
        </div>
    </div>
    {% if messages %}
                             <ul class="messages">
                               {% for message in messages %}
                                  <li style="color:green;font-weight:bold;text-align:center"  {% if message.tags %} class=" {{ message.tags }} " {% endif %}>{{ message }} </li>
                               {% endfor %}
                             </ul>
                        {% endif %}
    <div class="formBody row">
        <div class="column s-6">
          {{ form.file_name.errors }}
            <label class="inputGroup">
                <span>Upload File</span>
                <span>{{ form.file_name }}</span>
            </label>
           
        </div>
        <input type="hidden" name="user" value="{{request.user.id}}">
        <!--
            <label class="inputGroup">
                <span>Image</span>
                <input type="hidden" name="img" value="src">
                <span>
                    <input type="file" name="img" onchange="getImg(this)" multiple>
                    <img src="http://bookstore.crunchpress.com/wp-content/uploads/2013/05/b2.jpg" alt="" width="50">
                </span>
                
            </label>
            -->
        </div>

    </form> 
    {% endif %}
        <style>
        #table {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#table td, #table th {
  border: 1px solid #ddd;
  padding: 8px;
}

#table tr:nth-child(even){background-color: #f2f2f2;}

#table tr:hover {background-color: #ddd;}

#table th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #4CAF50;
  color: white;
}
    </style>
    <table id="table" >  
    <thead class="thead-dark">  
    <tr>  
        <th>S/N</th>  
        <th>File Name</th>
        <th>Date Uploaded</th>  
        <th>Actions</th>  
    </tr>  
    </thead>  
    <tbody>  
{% for f in files %}  
    <tr>  
        <td>{{forloop.counter}}</td>  
        <td>{{ f.file_name }}</td>  
        <td>{{ f.date_created }}</td>  
        
        <td> 
        <div class="cell cell-100 text-center">
            <a href="delete-data-file-storage/{{ f.id }}" class="btnRemove fa fa-remove bg-1 text-fff" onclick='return confirm("Do you really want to remove it ?")'></a>
                    <a href="/{{ f.file_name }} " class="btnRemove fa fa-download bg-1 text-fff"></a>
                </div>
             
        </td>  
    </tr>  
{% endfor %}  
    </tbody>  
</table> 
</div>

{% endblock %}
